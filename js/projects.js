// Projects Data for Dennis Gulyas - MIT BILDERN
const projects = [
    {
        id: 1,
        title: "QUANTUM RIFT VR",
        description: "Ein immersives VR-Erlebnis das Spieler durch verschiedene Dimensionen reisen lässt. Mit prozedural generierten Welten und physikalisch basierten Shadern.",
        tech: ["Unity", "C#", "VR", "Oculus", "Shader"],
        github: "https://github.com/D-Gulyas/quantum-rift",
        demo: "https://d-gulyas.itch.io/quantum-rift",
        icon: "fa-atom",
        filter: "unity",
        images: [
            {
                src: "https://images.unsplash.com/photo-1534423861386-85a16f5d13fd?w=800&h=450&fit=crop",
                caption: "Hauptmenü mit Dimensionen-Auswahl"
            },
            {
                src: "https://images.unsplash.com/photo-1552820728-8b83bb6b773f?w=800&h=450&fit=crop",
                caption: "Gameplay-Szene in der Quanten-Dimension"
            },
            {
                src: "https://images.unsplash.com/photo-1531816458010-fb768453ea86?w=800&h=450&fit=crop",
                caption: "VR-Interaktion mit Objekten"
            }
        ]
    },
    {
        id: 2,
        title: "CYBER RUNNER",
        description: "Cyberpunk Endless Runner mit dynamischen Level-Generation. Sammle Upgrades, vermeide Hindernisse und erreiche Highscores in einer neon-beleuchteten Stadt.",
        tech: ["Unity", "C#", "3D", "Procedural"],
        github: "https://github.com/D-Gulyas/cyber-runner",
        demo: "https://d-gulyas.itch.io/cyber-runner",
        icon: "fa-running",
        filter: "unity",
        images: [
            {
                src: "https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=800&h=450&fit=crop",
                caption: "Hauptcharakter im Cyberpunk-Stil"
            },
            {
                src: "https://images.unsplash.com/photo-1534423861386-85a16f5d13fd?w=800&h=450&fit=crop",
                caption: "Neon-beleuchtete Stadtumgebung"
            },
            {
                src: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=800&h=450&fit=crop",
                caption: "Gameplay mit Hindernissen und Power-ups"
            }
        ]
    },
    {
        id: 3,
        title: "DIMENSION DEFENDER",
        description: "Tower Defense mit interdimensionellen Portalen. Verteidige das Nexus gegen Wellen aus verschiedenen Realitäten. Mit KI-gesteuerten Gegnern und Upgrade-System.",
        tech: ["Unity", "C#", "Tower Defense", "AI", "Multiplayer"],
        github: "https://github.com/D-Gulyas/dimension-defender",
        demo: "https://d-gulyas.itch.io/dimension-defender",
        icon: "fa-shield-alt",
        filter: "unity",
        images: [
            {
                src: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=800&h=450&fit=crop",
                caption: "Tower Placement Interface"
            },
            {
                src: "https://images.unsplash.com/photo-1511512578047-dfb367046420?w=800&h=450&fit=crop",
                caption: "Welle von Gegnern aus verschiedenen Dimensionen"
            },
            {
                src: "https://images.unsplash.com/photo-1534423861386-85a16f5d13fd?w=800&h=450&fit=crop",
                caption: "Upgrade-Menü mit Spezialfähigkeiten"
            }
        ]
    },
    {
        id: 4,
        title: "VOID EXPLORER",
        description: "Space Exploration Spiel in Unreal Engine 5. Erkunde fremde Planeten, sammle Ressourcen und entdecke antike Alien-Artefakte mit Nanite und Lumen.",
        tech: ["Unreal", "C++", "3D", "Blueprint", "UE5"],
        github: "https://github.com/D-Gulyas/void-explorer",
        demo: "https://d-gulyas.itch.io/void-explorer",
        icon: "fa-space-shuttle",
        filter: "unreal",
        images: [
            {
                src: "https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=800&h=450&fit=crop",
                caption: "Raumschiff im Weltraum"
            },
            {
                src: "https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=800&h=450&fit=crop",
                caption: "Fremder Planet mit alien Artefakten"
            },
            {
                src: "https://images.unsplash.com/photo-1502134249126-9f3755a50d78?w=800&h=450&fit=crop",
                caption: "Cockpit-Ansicht mit HUD"
            }
        ]
    },
    {
        id: 5,
        title: "SYNTHSPACE AR",
        description: "Augmented Reality Musik-Visualisierung. Erlebe Sound in einer völlig neuen Dimension durch deine Handykamera. Erstelle eigene visuelle Effekte.",
        tech: ["Unity", "C#", "AR", "Audio", "Mobile"],
        github: "https://github.com/D-Gulyas/synthspace-ar",
        demo: "https://d-gulyas.itch.io/synthspace",
        icon: "fa-music",
        filter: "vr",
        images: [
            {
                src: "https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=800&h=450&fit=crop",
                caption: "AR-Musikvisualisierung in realer Umgebung"
            },
            {
                src: "https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=800&h=450&fit=crop",
                caption: "Sound-Wellen Visualisierung"
            },
            {
                src: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=800&h=450&fit=crop",
                caption: "Effekt-Editor Interface"
            }
        ]
    },
    {
        id: 6,
        title: "DATA STREAM PUZZLE",
        description: "Puzzle Spiel in einer digitalen Welt. Löse Rätsel durch Datenmanipulation und Logik-Puzzles. Mit über 50 Leveln und steigendem Schwierigkeitsgrad.",
        tech: ["Unity", "C#", "Puzzle", "UI", "2D"],
        github: "https://github.com/D-Gulyas/data-stream",
        demo: "https://d-gulyas.itch.io/data-stream",
        icon: "fa-stream",
        filter: "unity",
        images: [
            {
                src: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=800&h=450&fit=crop",
                caption: "Hauptmenü mit Level-Auswahl"
            },
            {
                src: "https://images.unsplash.com/photo-1511512578047-dfb367046420?w=800&h=450&fit=crop",
                caption: "Puzzle-Lösungsmechanik"
            },
            {
                src: "https://images.unsplash.com/photo-1534423861386-85a16f5d13fd?w=800&h=450&fit=crop",
                caption: "Komplexes Datenfluss-Puzzle"
            }
        ]
    },
    {
        id: 7,
        title: "NEO-TOKYO RACER",
        description: "Futuristisches Rennspiel in einer Cyberpunk-Metropole. Mit custom Car Physics, Day/Night Cycle und dynamischem Wettersystem.",
        tech: ["Unreal", "C++", "Racing", "Physics", "3D"],
        github: "https://github.com/D-Gulyas/neo-tokyo-racer",
        demo: "https://d-gulyas.itch.io/neo-tokyo",
        icon: "fa-car",
        filter: "unreal",
        images: [
            {
                src: "https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=800&h=450&fit=crop",
                caption: "Futuristisches Rennfahrzeug"
            },
            {
                src: "https://images.unsplash.com/photo-1511512578047-dfb367046420?w=800&h=450&fit=crop",
                caption: "Cyberpunk-Stadt bei Nacht"
            },
            {
                src: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=800&h=450&fit=crop",
                caption: "Rennstrecke mit dynamischem Wetter"
            }
        ]
    },
    {
        id: 8,
        title: "BIOME SIMULATOR",
        description: "Ecosystem Simulation mit evolutionären Algorithmen. Beobachte wie digitale Lebensformen sich an ihre Umgebung anpassen und entwickeln.",
        tech: ["Unity", "C#", "Simulation", "AI", "Procedural"],
        github: "https://github.com/D-Gulyas/biome-simulator",
        demo: "https://d-gulyas.itch.io/biome-sim",
        icon: "fa-seedling",
        filter: "unity",
        images: [
            {
                src: "https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=800&h=450&fit=crop",
                caption: "Generiertes Ökosystem"
            },
            {
                src: "https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=800&h=450&fit=crop",
                caption: "Evolution von digitalen Lebensformen"
            },
            {
                src: "https://images.unsplash.com/photo-1502134249126-9f3755a50d78?w=800&h=450&fit=crop",
                caption: "Statistiken und Analysen"
            }
        ]
    }
];

// Load Projects
document.addEventListener('DOMContentLoaded', function() {
    loadProjects();
    createProjectOverlay();
});

function loadProjects() {
    const projectsGrid = document.getElementById('projects-grid');
    if (!projectsGrid) return;
    
    projectsGrid.innerHTML = '';
    
    projects.forEach(project => {
        const projectCard = createProjectCard(project);
        projectsGrid.appendChild(projectCard);
    });
}

function createProjectCard(project) {
    const card = document.createElement('div');
    card.className = 'project-card';
    card.dataset.filter = project.filter;
    card.dataset.id = project.id;
    
    const techTags = project.tech.map(tech => 
        `<span class="tech-tag">${tech}</span>`
    ).join('');
    
    card.innerHTML = `
        <div class="project-image">
            <i class="fas ${project.icon}"></i>
        </div>
        <div class="project-content">
            <h3 class="project-title">${project.title}</h3>
            <div class="project-tech">
                ${techTags}
            </div>
            <p class="project-description">${project.description}</p>
            <div class="project-links">
                <a href="${project.github}" target="_blank" class="project-link">
                    <i class="fab fa-github"></i> Code
                </a>
                <a href="${project.demo}" target="_blank" class="project-link">
                    <i class="fas fa-external-link-alt"></i> Demo
                </a>
                <a href="#" class="project-link info-btn" data-id="${project.id}">
                    <i class="fas fa-info-circle"></i> Infos
                </a>
            </div>
        </div>
    `;
    
    // Add click event for info button
    const infoBtn = card.querySelector('.info-btn');
    if (infoBtn) {
        infoBtn.addEventListener('click', function(e) {
            e.preventDefault();
            openProjectModal(project.id);
        });
    }
    
    return card;
}

function createProjectOverlay() {
    const overlay = document.createElement('div');
    overlay.className = 'project-overlay';
    document.body.appendChild(overlay);
}

function openProjectModal(projectId) {
    const project = projects.find(p => p.id == projectId);
    if (!project) return;
    
    const overlay = document.querySelector('.project-overlay');
    if (!overlay) return;
    
    // Create modal content
    const modalContent = document.createElement('div');
    modalContent.className = 'project-modal-content';
    
    modalContent.innerHTML = `
        <div class="project-modal-header">
            <h3>${project.title} - DETAILS</h3>
            <button class="project-modal-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="project-modal-body">
            <div class="project-modal-main">
                <div class="project-modal-icon">
                    <i class="fas ${project.icon}"></i>
                </div>
                <div class="project-modal-tech">
                    ${project.tech.map(tech => `<span class="tech-tag">${tech}</span>`).join('')}
                </div>
                <p class="project-modal-description">${project.description}</p>
                
                <!-- GALLERY SECTION -->
                <div class="project-gallery">
                    <h4><i class="fas fa-images"></i> SCREENSHOTS & MEDIA</h4>
                    <div class="gallery-grid" id="gallery-${project.id}">
                        <!-- Images will be loaded here -->
                    </div>
                </div>
                
                <div class="project-details-grid">
                    <div class="detail-section">
                        <h4><i class="fas fa-cogs"></i> TECHNISCHE DETAILS</h4>
                        <ul>
                            <li><strong>Engine:</strong> ${project.tech.includes('Unity') ? 'Unity Engine' : 'Unreal Engine 5'}</li>
                            <li><strong>Programmiersprache:</strong> ${project.tech.includes('C#') ? 'C#' : 'C++'}</li>
                            <li><strong>Render Pipeline:</strong> ${project.tech.includes('UE5') ? 'Lumen & Nanite' : 'URP'}</li>
                            <li><strong>Plattform:</strong> ${project.tech.includes('Mobile') ? 'iOS/Android' : 'Windows'}</li>
                            <li><strong>Version Control:</strong> Git / GitHub</li>
                        </ul>
                    </div>
                    
                    <div class="detail-section">
                        <h4><i class="fas fa-tasks"></i> MEINE AUFGABEN</h4>
                        <ul>
                            <li>Gameplay-Programmierung</li>
                            <li>Level-Design & Balancing</li>
                            <li>UI/UX Implementierung</li>
                            <li>Performance Optimierung</li>
                            <li>Bug Fixing & Testing</li>
                        </ul>
                    </div>
                    
                    <div class="detail-section">
                        <h4><i class="fas fa-star"></i> BESONDERE FEATURES</h4>
                        <ul>
                            <li>Dynamische Spielmechaniken</li>
                            <li>Responsive Steuerung</li>
                            <li>Atmosphärische Soundeffekte</li>
                            <li>Innovative Level-Designs</li>
                            <li>Optimierte Performance</li>
                        </ul>
                    </div>
                    
                    <div class="detail-section">
                        <h4><i class="fas fa-chart-line"></i> HERAUSFORDERUNGEN</h4>
                        <ul>
                            <li>Performance-Optimierung für VR</li>
                            <li>Komplexe KI-Implementierung</li>
                            <li>Dynamische Level-Generation</li>
                            <li>Cross-Platform Entwicklung</li>
                            <li>Realistische Physik-Simulation</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="project-modal-sidebar">
                <div class="project-stats">
                    <h4><i class="fas fa-chart-bar"></i> PROJEKTSTATS</h4>
                    <div class="stat-item">
                        <span class="stat-label">Entwicklungszeit</span>
                        <span class="stat-value">3-4 Monate</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Teamgröße</span>
                        <span class="stat-value">Solo-Projekt</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Code-Zeilen</span>
                        <span class="stat-value">5.000+</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Assets</span>
                        <span class="stat-value">200+</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Status</span>
                        <span class="stat-value status-active">Aktiv</span>
                    </div>
                </div>
                
                <div class="project-links-modal">
                    <h4><i class="fas fa-external-link-alt"></i> LINKS</h4>
                    <a href="${project.github}" target="_blank" class="project-link-modal">
                        <i class="fab fa-github"></i> GitHub Repository
                    </a>
                    <a href="${project.demo}" target="_blank" class="project-link-modal">
                        <i class="fas fa-gamepad"></i> Live Demo
                    </a>
                    <a href="#" class="project-link-modal" onclick="window.print()">
                        <i class="fas fa-print"></i> Als PDF speichern
                    </a>
                </div>
                
                <div class="project-skills">
                    <h4><i class="fas fa-tools"></i> VERWENDETE SKILLS</h4>
                    <div class="skills-tags">
                        ${getSkillTags(project).map(skill => `<span class="skill-tag">${skill}</span>`).join('')}
                    </div>
                </div>
            </div>
        </div>
        
        <div class="project-modal-footer">
            <div class="project-actions">
                <a href="${project.github}" target="_blank" class="btn btn-primary">
                    <i class="fab fa-github"></i> Code ansehen
                </a>
                <a href="${project.demo}" target="_blank" class="btn btn-secondary">
                    <i class="fas fa-play"></i> Demo testen
                </a>
            </div>
        </div>
    `;
    
    // Add modal to overlay
    overlay.innerHTML = '';
    overlay.appendChild(modalContent);
    overlay.classList.add('active');
    document.body.style.overflow = 'hidden';
    
    // Load gallery images
    loadGalleryImages(project);
    
    // Add close event
    const closeBtn = modalContent.querySelector('.project-modal-close');
    if (closeBtn) {
        closeBtn.addEventListener('click', closeProjectModal);
    }
    
    // Close when clicking outside modal
    overlay.addEventListener('click', function(e) {
        if (e.target === overlay) {
            closeProjectModal();
        }
    });
    
    // Close with Escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeProjectModal();
        }
    });
}

function loadGalleryImages(project) {
    const galleryGrid = document.getElementById(`gallery-${project.id}`);
    if (!galleryGrid || !project.images) return;
    
    project.images.forEach((image, index) => {
        const galleryItem = document.createElement('div');
        galleryItem.className = 'gallery-item';
        galleryItem.dataset.index = index;
        
        galleryItem.innerHTML = `
            <div class="gallery-placeholder">
                <i class="fas fa-image"></i>
                <span>Bild ${index + 1}</span>
            </div>
            <img class="gallery-preview" src="${image.src}" alt="${image.caption}" loading="lazy">
        `;
        
        galleryGrid.appendChild(galleryItem);
        
        // Load image
        const img = new Image();
        img.src = image.src;
        img.onload = function() {
            galleryItem.classList.add('loaded');
        };
        
        // Add click event for lightbox
        galleryItem.addEventListener('click', function() {
            openLightbox(image.src, image.caption, project.images);
        });
    });
}

function openLightbox(imgSrc, caption, images) {
    if (typeof window.openLightbox === 'function') {
        window.openLightbox(imgSrc, caption, images);
    }
}

function closeProjectModal() {
    const overlay = document.querySelector('.project-overlay');
    if (overlay) {
        overlay.classList.remove('active');
        setTimeout(() => {
            overlay.innerHTML = '';
        }, 300);
    }
    document.body.style.overflow = '';
}

function getSkillTags(project) {
    const skillMap = {
        'Unity': ['Game Development', 'C# Programming', 'Unity Engine'],
        'Unreal': ['C++ Programming', 'Unreal Engine', 'Blueprint'],
        'C#': ['Object-Oriented Programming', '.NET', 'Game Logic'],
        'C++': ['Memory Management', 'Performance', 'Game Systems'],
        'VR': ['Virtual Reality', '3D Interaction', 'Immersive Design'],
        'AR': ['Augmented Reality', 'Mobile Development', 'Camera Integration'],
        '3D': ['3D Modeling', 'Texturing', 'Animation'],
        'AI': ['Artificial Intelligence', 'Pathfinding', 'Behavior Trees'],
        'Procedural': ['Algorithm Design', 'Mathematics', 'Random Generation'],
        'Physics': ['Game Physics', 'Collision Detection', 'Simulation'],
        'Multiplayer': ['Networking', 'Client-Server', 'Synchronization'],
        'Mobile': ['iOS Development', 'Android Development', 'Touch Controls']
    };
    
    let skills = [];
    project.tech.forEach(tech => {
        if (skillMap[tech]) {
            skills.push(...skillMap[tech]);
        }
    });
    
    // Remove duplicates
    return [...new Set(skills)];
}
